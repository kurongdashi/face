# js 运行机制

- V8 引擎为例子：js 编译-> ast（抽象语法树）->编译底层二进制-> cpu 执行->优化（缓存一些常用方法，类）加快执行

- ast(abstrct syntax tree)：词法分析->语法分析->代码转换

```js
// 举例 let my='张三'，将主语 我 谓语 是 宾语 张三 串联起来
// 通过使用json对象来表示这种关系
{
    type:'Program',
    object:[
        obj:{
            ...
        }
    ]
}
```

- 算法复杂度用 O(n^a) 表示，n 代表执行次数 N^a 表示，a 个嵌套循环

```js
for(let i=0;i<n;i++){ // 执行n 次
    for(let j=0;j<n;i++){ // 执行n*n次
        ...
        // 根据上面的规律嵌套循环越深，执行次数越多，算法越复杂
    }
}
```

- 变量提升

```js
let a = 1;
var b = 2;
// 在变量声明时会分配内存，会将var声明的变量放在 "变量环境"，并且会初始化一个undefined let，const 声明的变量会存储在"词法环境"中，有一个自己的作用域，并且let 不会初始化值,如果你在let作用域外使用变量则会报错
```

- 事件循环

```
异步任务队列：宏任务进宏队列，微任务进微队列.

```

- 垃圾回收

1. 标记清除

```
V8引擎会在堆内存中开辟两块内存，新生代内存，老生代内存，就是新创建的对象进新生代，经过几轮扫描后如果，对象还有引用就会将对象搬到老生代内存中；

新生代内存中又分成两块from-space 和to-spacce ,new Object 先进from-space 如果放不下，则会标记from-space中无效对象，
然后清除，然后将剩余的活跃对象整理对齐（减少内存间隙即内存碎片）并且搬到to-space中，

举例：就像打扫房子时将房子中有用的东西（桌子凳子等）搬到一个新的空间里，然后将垃圾清除，在把新的空间当成新房子整理桌子凳子，以迎接下一次打扫

```

2. 引用计数
